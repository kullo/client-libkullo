// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from client.djinni

#pragma once

#include <kulloclient/nn.h>
#include <memory>
#include <string>
#include <unordered_map>

namespace Kullo { namespace Api {

class AsyncTask;
class ClientAddressExistsListener;
class ClientCheckCredentialsListener;
class ClientCreateSessionListener;
class ClientGenerateKeysListener;
class SessionListener;
struct Address;
struct MasterKey;

/** A Client is the entry point to most of libkullo. */
class Client {
public:
    virtual ~Client() {}

    /** Constants for the use with versions() */
    static std::string const BOTAN;

    static std::string const BOOST;

    static std::string const JSONCPP;

    static std::string const LIBKULLO;

    static std::string const SMARTSQLITE;

    static std::string const SQLITE;

    /** Create a new Client instance. You will most probably only need one. */
    static ::Kullo::nn_shared_ptr<Client> create();

    /**
     * Opens a session for the given user. dbFilePath is the absolute path to the
     * database file, including the filename. The folder must exist, and it must
     * be possible for the current user to create files in it. The file itself is
     * created if it doesn't already exist.
     *
     * Attention: Don't ever re-use the same DB file for multiple accounts!
     */
    virtual ::Kullo::nn_shared_ptr<AsyncTask> createSessionAsync(const Address & address, const MasterKey & masterKey, const std::string & dbFilePath, const ::Kullo::nn_shared_ptr<SessionListener> & sessionListener, const ::Kullo::nn_shared_ptr<ClientCreateSessionListener> & listener) = 0;

    /** Check whether an address exists. */
    virtual ::Kullo::nn_shared_ptr<AsyncTask> addressExistsAsync(const Address & address, const ::Kullo::nn_shared_ptr<ClientAddressExistsListener> & listener) = 0;

    /** Check whether the master key is valid for the given address. */
    virtual ::Kullo::nn_shared_ptr<AsyncTask> checkCredentialsAsync(const Address & address, const MasterKey & masterKey, const ::Kullo::nn_shared_ptr<ClientCheckCredentialsListener> & listener) = 0;

    /** Generate new keys, which is the first step to registering an account. */
    virtual ::Kullo::nn_shared_ptr<AsyncTask> generateKeysAsync(const ::Kullo::nn_shared_ptr<ClientGenerateKeysListener> & listener) = 0;

    /** Returns pairs of <library name, version number> for the libraries used. */
    virtual std::unordered_map<std::string, std::string> versions() = 0;
};

} }  // namespace Kullo::Api
